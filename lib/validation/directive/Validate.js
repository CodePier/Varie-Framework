"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var vue_1 = require("vue");
function checkForErrors(el, vNode) {
    var errors = vNode.value.isValid();
    if (errors && errors[el.name]) {
        if (!hasValidationErrorElement(el)) {
            el.insertAdjacentHTML("afterend", "<div class=\"validation-error\"></div>");
        }
        return (el.nextSibling.innerHTML = errors[el.name]);
    }
    removeErrors(el);
}
function removeErrors(el) {
    if (hasValidationErrorElement(el)) {
        el.nextSibling.remove();
    }
}
function hasValidationErrorElement(el) {
    var sibling = el.nextSibling;
    if (sibling && sibling.classList) {
        return sibling.classList.contains("validation-error");
    }
    return false;
}
vue_1.default.directive("validate", {
    inserted: function (el, vNode) {
        el.onblur = function () {
            checkForErrors(el, vNode);
        };
    },
    update: function (el, vNode) {
        if (hasValidationErrorElement(el)) {
            checkForErrors(el, vNode);
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmFsaWRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdmFsaWRhdGlvbi9kaXJlY3RpdmUvVmFsaWRhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQkFBc0I7QUFFdEIsd0JBQXdCLEVBQWUsRUFBRSxLQUFLO0lBQzVDLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDbkMsRUFBRSxDQUFDLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLENBQUMseUJBQXlCLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25DLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsd0NBQXNDLENBQUMsQ0FBQztRQUM1RSxDQUFDO1FBQ0QsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFDRCxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbkIsQ0FBQztBQUVELHNCQUFzQixFQUFlO0lBQ25DLEVBQUUsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzFCLENBQUM7QUFDSCxDQUFDO0FBRUQsbUNBQW1DLEVBQWU7SUFDaEQsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQztJQUM3QixFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDakMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQsYUFBRyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUU7SUFDeEIsUUFBUSxFQUFFLFVBQUMsRUFBZSxFQUFFLEtBQUs7UUFDL0IsRUFBRSxDQUFDLE1BQU0sR0FBRztZQUNWLGNBQWMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUIsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUNELE1BQU0sRUFBRSxVQUFDLEVBQWUsRUFBRSxLQUFLO1FBQzdCLEVBQUUsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxjQUFjLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVCLENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFDIn0=